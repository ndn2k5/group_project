{% extends "base.html" %}

{% block title %}ƒêƒÉng k√Ω - Fun Work Hub{% endblock %}

{% block styles %}
<style>
/* DataForSEO-inspired Auth Design - Sign Up */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', sans-serif;
    background: #0f0f0f;
    color: #ffffff;
    height: 100vh;
    overflow: hidden;
}

.auth-container {
    display: flex;
    height: 100vh;
}

/* Left Panel - Branding */
.auth-branding {
    flex: 1;
    background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position: relative;
    overflow: hidden;
}

.auth-branding::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="%23333" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
    opacity: 0.1;
}

.branding-content {
    text-align: center;
    z-index: 1;
    max-width: 400px;
    padding: 2rem;
}

.brand-logo {
    font-size: 3rem;
    font-weight: 800;
    margin-bottom: 1rem;
    background: linear-gradient(135deg, #00d4aa, #00a688);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.brand-title {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: #ffffff;
}

.brand-subtitle {
    font-size: 1.2rem;
    color: #a0a0a0;
    margin-bottom: 2rem;
    line-height: 1.6;
}

.signup-benefits {
    text-align: left;
}

.benefit-item {
    display: flex;
    align-items: flex-start;
    margin-bottom: 1.5rem;
    color: #cccccc;
}

.benefit-icon {
    color: #00d4aa;
    margin-right: 1rem;
    font-size: 1.2rem;
    width: 20px;
    margin-top: 0.2rem;
}

.benefit-content h4 {
    color: #ffffff;
    margin-bottom: 0.25rem;
    font-size: 1rem;
    font-weight: 600;
}

.benefit-content p {
    color: #a0a0a0;
    font-size: 0.9rem;
    line-height: 1.4;
}

/* Right Panel - Auth Form */
.auth-form-panel {
    flex: 1;
    background: #1a1a1a;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 2rem;
    overflow-y: auto;
}

.auth-form-container {
    width: 100%;
    max-width: 400px;
    padding: 1rem 0;
}

.auth-header {
    text-align: center;
    margin-bottom: 2rem;
}

.auth-title {
    font-size: 2rem;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 0.5rem;
}

.auth-subtitle {
    color: #a0a0a0;
    font-size: 1rem;
}

.form-row {
    display: flex;
    gap: 1rem;
}

.form-group {
    margin-bottom: 1.5rem;
    flex: 1;
}

.form-group.full-width {
    flex: none;
}

.form-label {
    display: block;
    margin-bottom: 0.5rem;
    color: #cccccc;
    font-weight: 500;
    font-size: 0.9rem;
}

.form-input {
    width: 100%;
    padding: 1rem;
    background: #2d2d2d;
    border: 1px solid #404040;
    border-radius: 8px;
    color: #ffffff;
    font-size: 1rem;
    transition: all 0.3s ease;
}

.form-input:focus {
    outline: none;
    border-color: #00d4aa;
    box-shadow: 0 0 0 3px rgba(0, 212, 170, 0.1);
    background: #333333;
}

.form-input::placeholder {
    color: #666666;
}

.password-strength {
    margin-top: 0.5rem;
    font-size: 0.8rem;
}

.strength-bar {
    width: 100%;
    height: 4px;
    background: #2d2d2d;
    border-radius: 2px;
    margin-bottom: 0.5rem;
    overflow: hidden;
}

.strength-fill {
    height: 100%;
    transition: all 0.3s ease;
    border-radius: 2px;
}

.strength-weak { background: #ef4444; width: 25%; }
.strength-fair { background: #f59e0b; width: 50%; }
.strength-good { background: #10b981; width: 75%; }
.strength-strong { background: #00d4aa; width: 100%; }

.strength-text {
    color: #a0a0a0;
}

.checkbox-group {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    margin-bottom: 1.5rem;
}

.checkbox-input {
    margin-top: 0.25rem;
    accent-color: #00d4aa;
}

.checkbox-label {
    color: #cccccc;
    font-size: 0.9rem;
    line-height: 1.4;
    cursor: pointer;
}

.checkbox-label a {
    color: #00d4aa;
    text-decoration: none;
}

.checkbox-label a:hover {
    text-decoration: underline;
}

.auth-btn {
    width: 100%;
    padding: 1rem;
    background: linear-gradient(135deg, #00d4aa, #00a688);
    color: #ffffff;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-bottom: 1.5rem;
}

.auth-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(0, 212, 170, 0.3);
}

.auth-btn:active {
    transform: translateY(0);
}

.auth-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.divider {
    text-align: center;
    margin: 1.5rem 0;
    color: #666666;
    position: relative;
}

.divider::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 1px;
    background: #404040;
}

.divider span {
    background: #1a1a1a;
    padding: 0 1rem;
}

.social-login {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
}

.social-btn {
    flex: 1;
    padding: 0.75rem;
    background: #2d2d2d;
    border: 1px solid #404040;
    border-radius: 8px;
    color: #cccccc;
    text-decoration: none;
    text-align: center;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}

.social-btn:hover {
    background: #333333;
    border-color: #00d4aa;
    color: #ffffff;
}

.auth-switch {
    text-align: center;
    color: #a0a0a0;
}

.auth-switch a {
    color: #00d4aa;
    text-decoration: none;
    font-weight: 500;
}

.auth-switch a:hover {
    text-decoration: underline;
}

/* Alert Messages */
.alert {
    padding: 1rem;
    border-radius: 8px;
    margin-bottom: 1.5rem;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.alert-success {
    background: rgba(16, 185, 129, 0.1);
    color: #10b981;
    border: 1px solid rgba(16, 185, 129, 0.2);
}

.alert-error {
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
    border: 1px solid rgba(239, 68, 68, 0.2);
}

/* Responsive */
@media (max-width: 768px) {
    .auth-container {
        flex-direction: column;
    }
    
    .auth-branding {
        flex: none;
        min-height: 30vh;
    }
    
    .brand-title {
        font-size: 2rem;
    }
    
    .auth-form-panel {
        flex: 1;
        padding: 1rem;
    }
    
    .form-row {
        flex-direction: column;
        gap: 0;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="auth-container">
    <!-- Left Panel - Branding -->
    <div class="auth-branding">
        <div class="branding-content">
            <div class="brand-logo">üöÄ</div>
            <h1 class="brand-title">Tham gia Fun Work Hub</h1>
            <p class="brand-subtitle">
                Kh·ªüi t·∫°o workspace ƒë·∫ßu ti√™n v√† b·∫Øt ƒë·∫ßu h√†nh tr√¨nh l√†m vi·ªác hi·ªáu qu·∫£
            </p>
            
            <div class="signup-benefits">
                <div class="benefit-item">
                    <i class="fas fa-rocket benefit-icon"></i>
                    <div class="benefit-content">
                        <h4>Workspace c√° nh√¢n mi·ªÖn ph√≠</h4>
                        <p>T·ª± ƒë·ªông t·∫°o workspace ri√™ng ƒë·ªÉ b·∫Øt ƒë·∫ßu</p>
                    </div>
                </div>
                <div class="benefit-item">
                    <i class="fas fa-users benefit-icon"></i>
                    <div class="benefit-content">
                        <h4>M·ªùi th√†nh vi√™n kh√¥ng gi·ªõi h·∫°n</h4>
                        <p>H·ª£p t√°c v·ªõi ƒë·ªôi nh√≥m m·ªôt c√°ch d·ªÖ d√†ng</p>
                    </div>
                </div>
                <div class="benefit-item">
                    <i class="fas fa-cogs benefit-icon"></i>
                    <div class="benefit-content">
                        <h4>Scenarios linh ho·∫°t</h4>
                        <p>T·∫°o v√† qu·∫£n l√Ω c√°c k·ªãch b·∫£n l√†m vi·ªác</p>
                    </div>
                </div>
                <div class="benefit-item">
                    <i class="fas fa-shield-alt benefit-icon"></i>
                    <div class="benefit-content">
                        <h4>B·∫£o m·∫≠t cao</h4>
                        <p>D·ªØ li·ªáu ƒë∆∞·ª£c m√£ h√≥a v√† b·∫£o v·ªá tuy·ªát ƒë·ªëi</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Right Panel - Auth Form -->
    <div class="auth-form-panel">
        <div class="auth-form-container">
            <div class="auth-header">
                <h2 class="auth-title">T·∫°o t√†i kho·∫£n m·ªõi</h2>
                <p class="auth-subtitle">ƒêi·ªÅn th√¥ng tin ƒë·ªÉ b·∫Øt ƒë·∫ßu s·ª≠ d·ª•ng Fun Work Hub</p>
            </div>
            
            <!-- Flash Messages -->
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }}">
                            <i class="fas fa-{{ 'check-circle' if category == 'success' else 'exclamation-triangle' }}"></i>
                            {{ message }}
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            
            <form method="POST" action="{{ url_for('auth.signup') }}" id="signupForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="first_name" class="form-label">T√™n</label>
                        <input type="text" id="first_name" name="first_name" class="form-input" 
                               placeholder="Nguy·ªÖn" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="last_name" class="form-label">H·ªç</label>
                        <input type="text" id="last_name" name="last_name" class="form-input" 
                               placeholder="VƒÉn A" required>
                    </div>
                </div>
                
                <div class="form-group full-width">
                    <label for="email" class="form-label">Email</label>
                    <input type="email" id="email" name="email" class="form-input" 
                           placeholder="nguyenvana@example.com" required>
                </div>
                
                <div class="form-group full-width">
                    <label for="password" class="form-label">M·∫≠t kh·∫©u</label>
                    <input type="password" id="password" name="password" class="form-input" 
                           placeholder="T·ªëi thi·ªÉu 8 k√Ω t·ª±" required minlength="8"
                           oninput="checkPasswordStrength()">
                    <div class="password-strength">
                        <div class="strength-bar">
                            <div class="strength-fill" id="strengthFill"></div>
                        </div>
                        <div class="strength-text" id="strengthText">Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ ki·ªÉm tra ƒë·ªô m·∫°nh</div>
                    </div>
                </div>
                
                <div class="form-group full-width">
                    <label for="confirm_password" class="form-label">X√°c nh·∫≠n m·∫≠t kh·∫©u</label>
                    <input type="password" id="confirm_password" name="confirm_password" class="form-input" 
                           placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u" required>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="terms" name="terms" class="checkbox-input" required>
                    <label for="terms" class="checkbox-label">
                        T√¥i ƒë·ªìng √Ω v·ªõi <a href="#" target="_blank">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a> 
                        v√† <a href="#" target="_blank">Ch√≠nh s√°ch b·∫£o m·∫≠t</a> c·ªßa Fun Work Hub
                    </label>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="newsletter" name="newsletter" class="checkbox-input">
                    <label for="newsletter" class="checkbox-label">
                        T√¥i mu·ªën nh·∫≠n th√¥ng tin c·∫≠p nh·∫≠t v·ªÅ t√≠nh nƒÉng m·ªõi v√† m·∫πo s·ª≠ d·ª•ng qua email
                    </label>
                </div>
                
                <button type="submit" class="auth-btn" id="submitBtn" disabled>T·∫°o t√†i kho·∫£n</button>
            </form>
            
            <div class="divider">
                <span>ho·∫∑c ƒëƒÉng k√Ω v·ªõi</span>
            </div>
            
            <div class="social-login">
                <a href="#" class="social-btn">
                    <i class="fab fa-google"></i>
                    Google
                </a>
                <a href="#" class="social-btn">
                    <i class="fab fa-github"></i>
                    GitHub
                </a>
            </div>
            
            <div class="auth-switch">
                ƒê√£ c√≥ t√†i kho·∫£n? <a href="{{ url_for('auth.signin') }}">ƒêƒÉng nh·∫≠p</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function checkPasswordStrength() {
    const password = document.getElementById('password').value;
    const strengthFill = document.getElementById('strengthFill');
    const strengthText = document.getElementById('strengthText');
    
    if (password.length === 0) {
        strengthFill.className = 'strength-fill';
        strengthText.textContent = 'Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ ki·ªÉm tra ƒë·ªô m·∫°nh';
        strengthText.style.color = '#a0a0a0';
        return;
    }
    
    let score = 0;
    let feedback = [];
    
    // Length check
    if (password.length >= 8) score += 1;
    else feedback.push('√≠t nh·∫•t 8 k√Ω t·ª±');
    
    // Uppercase check
    if (/[A-Z]/.test(password)) score += 1;
    else feedback.push('ch·ªØ hoa');
    
    // Lowercase check
    if (/[a-z]/.test(password)) score += 1;
    else feedback.push('ch·ªØ th∆∞·ªùng');
    
    // Number check
    if (/\d/.test(password)) score += 1;
    else feedback.push('s·ªë');
    
    // Special character check
    if (/[!@#$%^&*(),.?":{}|<>]/.test(password)) score += 1;
    else feedback.push('k√Ω t·ª± ƒë·∫∑c bi·ªát');
    
    // Update strength indicator
    if (score <= 2) {
        strengthFill.className = 'strength-fill strength-weak';
        strengthText.textContent = 'Y·∫øu - C·∫ßn: ' + feedback.slice(0, 3).join(', ');
        strengthText.style.color = '#ef4444';
    } else if (score === 3) {
        strengthFill.className = 'strength-fill strength-fair';
        strengthText.textContent = 'Trung b√¨nh - C·∫ßn: ' + feedback.slice(0, 2).join(', ');
        strengthText.style.color = '#f59e0b';
    } else if (score === 4) {
        strengthFill.className = 'strength-fill strength-good';
        strengthText.textContent = 'T·ªët - C·∫ßn: ' + feedback.join(', ');
        strengthText.style.color = '#10b981';
    } else {
        strengthFill.className = 'strength-fill strength-strong';
        strengthText.textContent = 'M·∫°nh - M·∫≠t kh·∫©u an to√†n';
        strengthText.style.color = '#00d4aa';
    }
    
    checkFormValid();
}

function checkFormValid() {
    const form = document.getElementById('signupForm');
    const submitBtn = document.getElementById('submitBtn');
    const password = document.getElementById('password').value;
    const confirmPassword = document.getElementById('confirm_password').value;
    const terms = document.getElementById('terms').checked;
    
    const isValid = form.checkValidity() && 
                   password === confirmPassword && 
                   password.length >= 8 && 
                   terms;
    
    submitBtn.disabled = !isValid;
    
    // Check password match
    const confirmInput = document.getElementById('confirm_password');
    if (confirmPassword && password !== confirmPassword) {
        confirmInput.setCustomValidity('M·∫≠t kh·∫©u kh√¥ng kh·ªõp');
    } else {
        confirmInput.setCustomValidity('');
    }
}

// Add event listeners
document.getElementById('confirm_password').addEventListener('input', checkFormValid);
document.getElementById('terms').addEventListener('change', checkFormValid);
document.getElementById('signupForm').addEventListener('input', checkFormValid);
</script>
{% endblock %}